### ğŸ¥çš„ç½‘ç«™ç›®å‰å·²ç»å¼€æºå•¦ï¼ï¼ï¼æš‚å®šåä¸º**hexo-theme-Fomalhaut**ï¼ŒåŸä½œè€…ç½‘ç«™ï¼š[www.fomal.cc](https://www.fomal.cc)ï¼Œå¦‚æœä½ å–œæ¬¢çš„è¯å¯ä»¥å¸®æˆ‘ç‚¹ä¸€ä¸ªå…è´¹çš„StarğŸŒŸğŸŒŸğŸŒŸå“¦ï¼

### ğŸš§ğŸš§ğŸš§æœ¬å¼€æºé¡¹ç›®å¹¶ä¸é€‚åˆçº¯å°ç™½ï¼Œéœ€è¦ä¸€å®šçš„é­”æ”¹ç»éªŒï¼Œå› æ­¤å®‰è£…ä¹‹å‰åŠ¡å¿…å¯¹Hexoæ¡†æ¶å‘½ä»¤å’ŒButterflyä¸»é¢˜æ¯”è¾ƒç†Ÿæ‚‰ï¼Œä¸ç†Ÿæ‚‰çš„æœ‹å‹å»ºè®®æå‰ç†Ÿæ‚‰[Hexoä¸­æ–‡æ–‡æ¡£](https://hexo.bootcss.com/docs/configuration.html)å’Œ[Butterflyä¸»é¢˜æ–‡æ¡£](https://butterfly.js.org/)ï¼Œä»¥åŠç†Ÿæ‚‰æœ¬ç«™é­”æ”¹æ•™ç¨‹ï¼Œåˆ«ä¸Šæ¥å°±é—®æ–‡ç« æ€ä¹ˆå†™ï¼ï¼ï¼é¿å…å„ç§ä¸å¿…è¦çš„éº»çƒ¦ï¼ï¼ï¼æœ›å‘¨çŸ¥ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼


![](/repoPic/cover.jpg)

æœ¬æºç æ˜¯åŸºäº`Butterfly 4.3.1`çš„äºŒæ¬¡å¼€å‘ï¼Œæš‚æ—¶æ²¡åšå®Œå…¨çš„ä¸»é¢˜åˆ†ç¦»ï¼Œå› æ­¤å®‰è£…æ–¹æ³•æ˜¯æ•´ä¸ªåšå®¢çš„æ›¿æ¢ï¼Œå»ºè®®å¦èµ·ä¸€ä¸ªæ–‡ä»¶å¤¹è¿›è¡Œå®‰è£…ï¼Œæˆ–å¤‡ä»½å¥½åŸæ¥çš„èµ„æ–™å†æ¬è¿‡æ¥ã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä¸ç›´æ¥æ¬èµ°ï¼Œè€Œæ˜¯å€Ÿé‰´é‡Œé¢çš„éƒ¨åˆ†ä»£ç å†™æ³•ã€‚

### ğŸ“…ğŸ“…ğŸ“…3.5æ›´æ–°ï¼šå¾®è°ƒéƒ¨åˆ†æ ·å¼ï¼Œä¿®å¤éƒ¨åˆ†äººåæ˜ æ‰‹æœºç«¯æ— æ³•åŠ è½½cssæ ·å¼çš„é—®é¢˜ï¼Œé—®é¢˜åœ¨`fomal.js`çš„1340è¡Œé™„è¿‘ï¼Œåˆ‡æ¢è‡³æ‰‹æœºç«¯æ—¶å€™å¯¼è‡´ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œè¿™éƒ¨åˆ†ä»£ç æ³¨é‡Šæ‰å³å¯ï¼

```js
/* æœç´¢æ¡†ä¿®å¤ start */
// searchSize();
// window.addEventListener('resize', searchSize)
// // æœç´¢çª—å£è‡ªé€‚åº”
// function searchSize() {
//   // åªéœ€è¦é€‚åº”æ‰‹æœºç«¯
//   if (document.body.clientWidth > 768) return
//   let div = document.querySelector('#algolia-hits')
//   // ç›‘å¬æ’å…¥ï¼Œå¦‚æœæœ‰æ’å…¥åˆ™æ ¹æ®å¯è§†é«˜åº¦åŠ¨æ€è®¾ç½®æœ€å¤§é«˜åº¦
//   div.addEventListener('DOMNodeInserted', () => {
//     div.children[0].style.maxHeight = (document.documentElement.clientHeight - 210) + 'px'
//   })
// }
/* æœç´¢æ¡†ä¿®å¤ end */
```

å¤§å®¶å¦‚æœè¿˜é‡åˆ°ä»€ä¹ˆé—®é¢˜æ¬¢è¿ç»™ä½œè€…ç•™è¨€ï¼Œä½œè€…çœ‹åˆ°ä¼šç¬¬ä¸€æ—¶é—´ä¿®å¤å“¦ï¼Œæ„Ÿè°¢æ‚¨çš„æ”¯æŒï¼

### ğŸ¡ğŸ¡ğŸ¡å®‰è£…æ•™ç¨‹ï¼ˆæ¼”ç¤ºNodeJS v16.14.0 + Hexo 6.3.0ï¼‰ï¼š

1. å®‰è£… NodeJsã€Hexoã€Gitã€æ³¨å†Œå¹¶è¿æ¥Githubï¼Œæ­¤éƒ¨åˆ†å¯å‚è€ƒ[Hexoåšå®¢æ­å»ºåŸºç¡€æ•™ç¨‹(ä¸€)](https://www.fomal.cc/posts/e593433d.html)ã€‚
  PSï¼šç›¸å½“äºé“¾æ¥æ•™ç¨‹çš„ç¬¬1-7æ­¥ï¼Œç¬¬8æ­¥å°±ä¸è¦åšäº†ï¼Œä¸ç„¶ä¼šæ¸…ç©ºæºç çš„ï¼ï¼ï¼ï¼ˆä¸æ˜¯æ–°æ‰‹è¯·è·³è¿‡è¿™æ¡ï¼‰

2. æŠŠæºç æ‰“åŒ…ä¸‹è½½åˆ°è‡ªå·±çš„ç”µè„‘ï¼Œç„¶åè§£å‹ç¼©åˆ°ä¸€ä¸ªä½ å–œæ¬¢çš„æ–‡ä»¶å¤¹ä¸­

3. åœ¨git bashå‘½ä»¤ä¸­åˆ‡æ¢åˆ°ä¸‹è½½çš„åšå®¢æ ¹ç›®å½•ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œæ¨¡å—å®‰è£…ã€‚è¿™é‡Œç»ä¸èƒ½ä½¿ç”¨`hexo init`åˆå§‹åŒ–ï¼Œè‹¥ä¸æ…ç”¨äº†ï¼Œåˆ™ç«™ç‚¹çš„é…ç½®æ–‡ä»¶`_config.yml`å†…å®¹ä¼šè¢«é‡ç½®

  ```bash
  npm i
  ```

4. æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¸…ç©ºå¹¶å¯åŠ¨é¡¹ç›®ï¼Œå¯åŠ¨æˆåŠŸåå†æµè§ˆå™¨åœ°å€æ è¾“å…¥`localhost:4000`è¿›è¡ŒéªŒè¯

  ```bash
  hexo cl; hexo g; hexo s
  ```

5. åˆ°è¿™é‡Œä¸€èˆ¬æ˜¯æ²¡å•¥é—®é¢˜çš„äº†ï¼Œå½“æœ¬åœ°èƒ½æˆåŠŸå¯åŠ¨åï¼Œæ”¹ä¸€ä¸‹ç«™ç‚¹é…ç½®æ–‡ä»¶çš„`_config.yml`çš„`deploy`é…ç½®é¡¹ï¼Œç„¶åç”¨ä»¥ä¸‹å‘½ä»¤éƒ¨ç½²åˆ°Githubï¼ˆè¿™ä¸€æ­¥å‡ºé—®é¢˜çš„ï¼Œè¯·åˆ é™¤ç«™ç‚¹é…ç½®æ–‡ä»¶çš„`deploy`é…ç½®é¡¹ä¸`baidu_url_submitter`çš„ä¿¡æ¯ï¼‰

  ```bash
  hexo d
  ```

### ğŸŒˆğŸŒˆğŸŒˆç®€è¦è¯´æ˜æ–‡æ¡£ï¼š

- jsçš„ä¸»ä½“åœ¨`source/js/fomal.js`é‡Œé¢ï¼Œåšäº†åŸºæœ¬åˆ†å—é€»è¾‘çš„æ ‡æ³¨ï¼ŒåæœŸæ•´åˆçš„ï¼Œä»¥`... start`å’Œ`... end` åŒ…è£¹

- cssä¸»ä½“åœ¨`themes\butterfly\source\css\_custom\custom.css`é‡Œï¼Œä¸Butterflyçš„è‡ªå¸¦æ ·å¼è”åˆç¼–è¯‘ä¸ºä¸€ä¸ªindex.cssï¼Œæœ‰åŸºæœ¬çš„æ³¨é‡Š

- å› ä¸ºå…¼é¡¾äº†ç™½å¤©å¤œé—´æ¨¡å¼ä¸åŒå£çº¸å’Œç”¨æˆ·è‡ªå®šä¹‰å£çº¸ï¼ŒèƒŒæ™¯çš„åˆ‡æ¢åšåœ¨äº†`fomal.js`çš„ç¬¬3190è¡Œé™„è¿‘ï¼Œç¾åŒ–æ¨¡å—ä»£ç é€»è¾‘åœ¨`fomal.js`çš„ç¬¬2894-3596è¡Œï¼Œå››ä¸ªèƒŒæ™¯åˆ†åˆ«ä¸ºPCç«¯ç™½å¤©ã€PCç«¯é»‘å¤œã€æ‰‹æœºç«¯ç™½å¤©ã€æ‰‹æœºç«¯é»‘å¤œï¼›ç¾åŒ–æ¨¡å—èµ·ç‚¹ä¸ºç¬¬3356è¡Œï¼Œå¯ä»¥è‡ªå®šä¹‰ä»»ä½•DOMï¼Œä¾‹å¦‚æŒ‰é’®ã€æ»‘å—ã€å¼€å…³æŒ‰é’®ã€å›¾ç‰‡æ¡†å’Œå¤–æŒ‚æ ‡ç­¾ç­‰ï¼ˆæ³¨æ„ï¼šå¤–æŒ‚æ ‡ç­¾å¿…é¡»è¦è¢«`<div id="article-container">`åŒ…å«æ‰ä¼šè¢«æ¸²æŸ“ï¼‰

  ![](repoPic/meihua.png)

  ```js
  /* ç¾åŒ–æ¨¡å— start */
  ...
  // é›ªèŠ±å¼€å…³(è¿™é‡Œå°±æ˜¯é»˜è®¤å…³é›ªèŠ±ï¼Œå¦‚æœä½ æƒ³é»˜è®¤å¼€å°±å°†noneæ”¹ä¸ºblock)
  if (localStorage.getItem("snow") == undefined) {
    localStorage.setItem("snow", "none");
  }
  ...
  // èƒŒæ™¯å›¾(çº¦3190è¡Œ) ä¸‹é¢é“¾æ¥æ¢æˆä½ è‡ªå·±çš„å›¾ç‰‡é“¾æ¥
  document.getElementById("defineBg").innerText = `:root{
    --default-bg: url(https://lskypro.acozycotage.net/Fomalhaut/img/dm14.webp);
    --darkmode-bg:url(https://lskypro.acozycotage.net/Fomalhaut/img/yuanshen1.webp);
    --mobileday-bg: url(https://lskypro.acozycotage.net/Fomalhaut/img/snow.webp);
    --mobilenight-bg: url(https://lskypro.acozycotage.net/Fomalhaut/img/mb8.webp);
  }`;
  ...
  // ç¾åŒ–æ¨¡å—ä¸»ä½“DOM(çº¦3356è¡Œ)
    winbox.body.innerHTML = `
    
      ...
      <h3>1. äºŒæ¬¡å…ƒ</h3>
      {% folding cyan, æŸ¥çœ‹äºŒæ¬¡å…ƒèƒŒæ™¯ %}
      <div class="bgbox">
      <a href="javascript:;" rel="noopener external nofollow" style="background-image:url(https://lskypro.acozycotage.net/Fomalhaut/img/home_bg.webp)" class="imgbox" onclick="changeBg('url(https://lskypro.acozycotage.net/Fomalhaut/img/home_bg.webp)')"></a>
      // è¿™é‡Œè‡ªå·±åŠ å›¾ç‰‡
      </div>
      {% endfolding %}
      ...
  
    `
  ...
  /* ç¾åŒ–æ¨¡å— end */
  
  ```

- é¡µè„šéƒ¨åˆ†è¯·è§`themes\butterfly\layout\includes\footer.pug`ï¼ŒåŒ…æ‹¬é¡µè„šè®¡æ—¶å™¨ã€å¾½æ ‡ã€æ–‡å­—ã€å¸ƒå±€ç­‰

- å°é¢å›¾åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶`_config.butterfly.yml`çš„`default_cover`é…ç½®é¡¹ï¼Œå»ºè®®é…ç½®å¤šé¡¹åéšæœºåˆ·å‡ºå°é¢å›¾

  ```yaml
  cover:
    # display the cover or not (æ˜¯å¦é¡¯ç¤ºæ–‡ç« å°é¢)
    index_enable: true
    aside_enable: true
    archives_enable: true
    # the position of cover in home page (å°é¢é¡¯ç¤ºçš„ä½ç½®)
    # left/right/both
    position: both
    # When cover is not set, the default cover is displayed (ç•¶æ²’æœ‰è¨­ç½®coveræ™‚ï¼Œé»˜èªçš„å°é¢é¡¯ç¤º)
    default_cover:
      - https://source.fomal.cc/img/default_cover_14.webp
      - https://source.fomal.cc/img/default_cover_15.webp
      # ......
  ```

  

- ç½‘ç«™å›¾æ ‡ä¸ºæ ¹ç›®å½•çš„`favicon.ico`ï¼Œæ›¿æ¢ä¸ºä½ è‡ªå·±çš„å›¾æ ‡å³å¯

- æ¬¢è¿ä¿¡æ¯åœ°ç†ä½ç½®æ˜¾ç¤ºï¼Œè¿™ä¸ªéœ€è¦é…ç½®è‡ªå·±çš„keyï¼Œç±»ä¼¼çš„è¿˜æœ‰bibiçš„é…ç½®ã€æœ‹å‹åœˆç­‰é…ç½®å‡éœ€è¦å‚è€ƒç›¸å…³æ–‡æ¡£æ”¹æˆè‡ªå·±çš„API

- ä¸ªäººä¿¡æ¯å¡ç‰‡çš„å›¾æ ‡å’Œèœå•æ ç­‰å›¾æ ‡ï¼Œå‚è€ƒ[åšå®¢é­”æ”¹æ•™ç¨‹æ€»ç»“(äºŒ)](https://www.fomal.cc/posts/5389e93f.html)ä¸­çš„ç¬¬4-7é¡¹

- å…¶ä½™é…ç½®é¡¹åŸºæœ¬ä¸Butterflyå…¼å®¹ï¼Œå‚è€ƒ[Butterflyå®˜æ–¹æ–‡æ¡£](https://butterfly.js.org/)å³å¯

- é‡åˆ°é—®é¢˜è¯·å¤šçœ‹ç›¸å…³æ–‡æ¡£(Hexoä¸»é¢˜æ–‡æ¡£ã€Butterflyä¸»é¢˜æ–‡æ¡£ã€åº—é•¿çš„æ•™ç¨‹)å’Œæœ¬ç«™æ•™ç¨‹ï¼Œè‹¥æœ‰å…¶ä»–ç–‘é—®è¯·åŠ Qç¾¤ï¼š`691942826` éªŒè¯å›ç­”ï¼š`ğŸ¥å¼€æºé¡¹ç›®`

